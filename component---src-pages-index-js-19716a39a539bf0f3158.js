"use strict";(self.webpackChunkperfect_garage=self.webpackChunkperfect_garage||[]).push([[678],{4810:function(e,t,a){a.r(t),a.d(t,{default:function(){return _}});var n=a(5785),r=a(1721),l=a(7767),i=a.n(l),c=a(7294),o=a(1545),s=a(7279),m=a(3941),u=a(5095),d=function(e,t){return t.formatMessage({id:"label_"+e})},g=a(7606),p="card-module--iconButton--6jHbY",f="card-module--carLabelContainer--JqU4J",E=function(e){var t=e.empty,a=e.marginCard,n=e.index,r=e.edit,l=e.render,i=e.editButtonId,o=e.label,s=e.onLabelChanged,m=["card-module--card--AW7L7"];a&&m.push("card-module--marginCard--jim8H"),t?m.push("card-module--cardWithoutCar--pz3k-"):m.push("card-module--cardWithCar--QTCrW");var u=(0,c.useState)(o),d=u[0],E=u[1],h=(0,c.useState)(!1),v=h[0],b=h[1],w=["card-module--carLabel--6niFa","badge"];return s&&w.push("card-module--carLabelEdit--YmSNp"),c.createElement("div",{className:m.join(" ")},c.createElement("div",{id:i,className:"card-module--iconButtonContainer--xwwBp"},c.createElement("button",{type:"button",className:p+" icon-button",onClick:function(){return r(n)}},c.createElement(g.G,{icon:"edit"}))),l(),c.createElement("div",{className:[f,"container","is-fluid"].join(" ")},c.createElement("div",{className:w.join(" ")},v&&c.createElement("p",{className:"control has-text-dark",style:{display:"flex"}},c.createElement("input",{id:"search-input",type:"text",onChange:function(e){var t=e.target.value;return E(t)},className:"input",style:{flex:1},value:d}),c.createElement("button",{type:"button",className:p+" icon-button",onClick:function(){E(o),b(!1)}},c.createElement(g.G,{icon:"times"})),c.createElement("button",{type:"button",className:p+" icon-button",onClick:function(){b(!1),s(d)}},c.createElement(g.G,{icon:"check"}))),!v&&c.createElement(c.Fragment,null,c.createElement("div",{style:{flex:1}},o),s&&c.createElement("button",{type:"button",className:p+" icon-button",onClick:function(){b(!0)}},c.createElement(g.G,{icon:"edit"}))))))};E.defaultProps={marginCard:!1,empty:!1,onLabelChanged:null};var h=a(6898),v="title-module--titleContainer---5d8a",b="title-module--title--r60k3",w=function(){var e=(0,o.useIntl)();return c.createElement("div",{className:[v,"badge"].join(" ")},c.createElement("h1",{className:[b].join(" ")},c.createElement(h.ww.div,{className:"title-module--chromeText--7MXR9",animate:{backgroundImage:["linear-gradient(to right, #EEE, #666, #444)","linear-gradient(to right, #666, #EEE, #666)","linear-gradient(to right, #666, #666, #EEE)","linear-gradient(to right, #CCC, #EEE, #CCC)"]},transition:{duration:1,ease:"easeInOut"}},e.formatMessage({id:"components.title.title"}))),c.createElement("h4",{className:"title-module--subTitle--zEB3E"},e.formatMessage({id:"components.title.subtitle"})))},C=a(7106),N=a(8769),y="spec-module--bar--uDrBt",k="spec-module--barWeight---tOOB",M="spec-module--barPower--W-y-W",x="spec-module--barRatio--Gdo76",S="spec-module--barTitle--upkwU",j=function(e){var t=e.power,a=e.weight,n=e.officialWeight,r=e.imageUrl,l=(0,o.useIntl)(),s=a||n,m=a?l.formatMessage({id:"components.spec.observed_weight"}):l.formatMessage({id:"components.spec.official_weight"}),d=Math.round(10*s/t)/10,g={width:100*t/1200+"%"},p={width:100*s/2500+"%"},f={width:100*d/20+"%"},E=new(i())(r),h=(0,u.Z_)(E.uriParts.host),v=l.formatMessage({id:"components.spec.hp"});return c.createElement("section",{className:"spec-module--specContainer--awvy8"},c.createElement("div",{className:S},c.createElement("legend",null,l.formatMessage({id:"components.spec.power"})),c.createElement("span",null,c.createElement("span",null,t),v)),c.createElement("div",{className:[y,M].join(" "),style:g}),c.createElement("div",{className:S},c.createElement("legend",null,m),c.createElement("span",null,c.createElement("span",null,s),"kg")),c.createElement("div",{className:[y,k].join(" "),style:p}),c.createElement("div",{className:S},c.createElement("legend",null,l.formatMessage({id:"components.spec.ratio"})),c.createElement("span",null,c.createElement("span",null,d),"kg/"+v)),c.createElement("div",{className:[y,x].join(" "),style:f}),c.createElement("legend",null,"Source : ",c.createElement("a",{href:"http://weightcars-fr.com"},"weightcars-fr.com")),h&&c.createElement("legend",null,"Photo : ",c.createElement("a",{href:"http://"+h},h)))};j.defaultProps={weight:null,imageUrl:null};var B=j,T="car-module--iconButton--CvMbI",I=function(e){var t=e.car,a=(0,s.$0)(t),n=(0,c.useState)(0),r=n[0],l=n[1],i="/images/"+t.mongodb_id+"-resized.jpg",o=null;return o=0===r?c.createElement(h.ww.img,{src:i,className:"car-module--image--4+-yy",alt:a,initial:{opacity:0},animate:{opacity:1}}):c.createElement(B,{brand:t.model.brand.name,variant:t.variant,power:t.power,weight:t.weight,officialWeight:t.officialWeight,startYear:t.startYear,imageUrl:t.selectedFavcarsUrl}),c.createElement("article",{className:"car-module--card--TBmaA"},c.createElement("div",{href:t.imageUrl,className:"car-module--imageContainer--2kl+h"},o),c.createElement("div",{className:"car-module--carCaption--ZUVKV"},c.createElement("div",{className:"car-module--switchButtons--1qPIa"},1===r&&c.createElement("button",{type:"button",className:["icon-button","icon",T].join(" ")},c.createElement(g.G,{icon:"image",size:"2x",onClick:function(){l(r-1)}})),0===r&&c.createElement("button",{type:"button",className:["icon-button","icon",T].join(" ")},c.createElement(g.G,{icon:"exchange-alt",size:"2x",onClick:function(){l(r+1)}}))),c.createElement("div",{className:"car-module--carTitle--To4bV"},c.createElement("h3",{className:"car-module--carLongLabel--D4JlF",title:a},a)),c.createElement("div",{className:"car-module--carYear--TqbvK"},t.startYear)))},L=function(e){return"car-"+e},W=function(e){return"edit-"+e},Y=function(e){function t(t){var a;a=e.call(this,t)||this;var n=new(i())(t.location.href);n.setHost(null),n.setPort(null);var r={saveMessage:null,saveOk:!(0,u.Nu)(n)},l="undefined"!=typeof window&&window;if((r.cars=[],l)&&((0,u.Qq)(n).forEach((function(e,a){if(r.cars[a]=null,e){var n=e.carId,l=e.carLabel;if(n){var i=t.data.allMongodbBmbu7Ynqra11RqiCars.edges.find((function(e){return e.node.mongodb_id===n}));i&&(r.cars[a]=i.node,r.cars[a].label=l||d(a+1,t.intl))}}})),!r.cars.some((function(e){return!!e})))){var c=(0,m.S3)();c.length>0&&(r.cars=c[0],n=(0,u.Yh)(r.cars,n))}return r.uri=n,r.saveOk=!l||!(0,m.m0)(r.cars),a.state=r,l&&(history.pushState({foo:"bar"},"",n.path()),setTimeout((function(){(0,s.hS)((function(e){var t=document.querySelector("#"+W(e+1));t&&(t.style.opacity="1")}))}),200)),a}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this,t=this.state,a=t.uri,r=t.saveOk,l=t.cars,g=t.saveMessage,p=this.props,f=p.location,h=p.intl,v=function(e){var t=new(i())(a.toString());t.setPath("/browse"),t.addQueryParam("edit",e),(0,o.navigate)((0,u.XX)(t))},b=function(t,r){var i=t?c.createElement(I,{id:L(r),className:"index-module--carComponent--2sxy5",car:t,initial:{opacity:0},animate:{opacity:1}}):c.createElement("div",{className:"index-module--noCarThumbnail--ma6Fw"},"?");return c.createElement(E,{key:"card-"+(t?t.mongodb_id:r),marginCard:2===r,empty:!t,index:r,label:t?t.label:d(r,h),edit:v,render:function(){return i},editButtonId:W(r),onLabelChanged:t?function(t){return function(t,r){var i=(0,n.Z)(l);i[t].label=r;var c=(0,u.Yh)(i,a);e.setState({cars:i,saveOk:!(0,m.m0)(l),uri:c}),history.pushState({foo:"bar"},"",c.path())}(r-1,t)}:null})},y=l.map((function(e,t){return b(e,t+1)})),k=l.map((function(e){return e?(0,s.$0)(e):null})).filter((function(e){return!!e})).join("\n");return c.createElement(C.A,{location:a.toString(),save:function(){if(!r){var t=(0,m.a1)(l),n=(0,u.Yh)(l,a),i=h.formatMessage({id:"pages.index.garage_saved"});e.setState({saveOk:!0,saveMessage:i+' "'+t+'"',uri:n}),setTimeout((function(){return e.setState({saveMessage:null})}),2e3)}},title:k,uri:a.toString(),saveDisabled:r,saveMessage:g,showButtons:!0},c.createElement(N.H,{location:f.pathname,title:k,uri:a.toString(),description:h.formatMessage({id:"pages.index.meta.description"})}),c.createElement(w,null),c.createElement("article",{className:"index-module--carsContainer--1c+rf"},y))},t}(c.Component),_=(0,o.injectIntl)(Y)}}]);
//# sourceMappingURL=component---src-pages-index-js-19716a39a539bf0f3158.js.map