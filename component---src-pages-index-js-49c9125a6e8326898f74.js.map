{"version":3,"sources":["webpack:///./src/functions/cars.js","webpack:///./src/components/title/title.js","webpack:///./src/components/car/spec.js","webpack:///./src/functions/url.js","webpack:///./src/components/car/car.js","webpack:///./src/pages/index.js"],"names":["eachCarIndex","fn","result","i","push","eachCar","fullname","car","model","brand","name","variant","Title","className","titleStyles","titleContainer","join","title","div","chromeText","animate","backgroundImage","transition","duration","ease","subTitle","Spec","power","weight","officialWeight","imageUrl","theWeight","ratio","Math","round","barPowerStyle","width","barWeightStyle","barRatioStyle","imageOrigin","fullHost","indexOfLastDot","lastIndexOf","tld","substr","domainName","indexOfSecondDot","extractHostname","Uri","uriParts","host","specStyles","card","bars","barTitle","bar","barPower","style","barWeight","barRatio","href","Car","carFullname","useState","currentPageIndex","setCurrentPageIndex","mongodb_id","divContent","img","src","carStyles","image","alt","initial","opacity","startYear","selectedFavcarsUrl","imageContainer","carCaption","switchButtons","iconButton","icon","size","onClick","carTitle","carLongLabel","carYear","carComponentId","index","editButtonId","Garage","props","uri","location","editParam","getQueryParamValue","carParam","replaceQueryParam","setState","saveOk","deleteQueryParam","newState","state","windowGlobal","window","param","carId","localStorage","getItem","foundNode","data","schema","edges","find","node","addQueryParam","removeItem","toString","every","val","setTimeout","editButtonIdx","document","querySelector","render","transform","classCar","indexStyles","car2","withCar","noCar","carLabels","thumbnail","id","carComponent","noCarThumbnail","iconButtonContainer","setPath","editCar","carLabelContainer","carLabel","car1","this","car3","filter","s","save","saveIndex","saveParam","setItem","showSaveMessage","saveDisabled","pathname","description","carsContainer","React","Component","query"],"mappings":"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","file":"component---src-pages-index-js-49c9125a6e8326898f74.js","sourcesContent":["export const eachCarIndex = fn => {\r\n    const result = []; \r\n    for (let i = 0; i < 3; i++) {\r\n        result.push(fn(i));\r\n    }\r\n    return result;\r\n}\r\n\r\nexport const eachCar = fn => {\r\n    return eachCarIndex(i => fn(`car${i+1}`, i));\r\n}\r\n\r\nexport const fullname = car => `${car.model.brand.name} ${car.variant}`;\r\n","\r\nimport React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport titleStyles from './title.module.scss';\r\n\r\nexport const Title = () => {\r\n    const titleAnimation = {\r\n        backgroundImage: [\r\n            'linear-gradient(to right, #EEE, #666, #444)', \r\n            'linear-gradient(to right, #666, #EEE, #666)', \r\n            'linear-gradient(to right, #666, #666, #EEE)',\r\n            'linear-gradient(to right, #CCC, #EEE, #CCC)', \r\n        ]\r\n    };\r\n\r\n    const titleTransition = {\r\n        duration: 2,\r\n        ease: \"easeInOut\",\r\n    };\r\n\r\n    return <div className={[titleStyles.titleContainer, 'badge'].join(' ')}>\r\n        <h1 className={[titleStyles.title].join(' ')}>\r\n            <motion.div className={titleStyles.chromeText}\r\n                animate={titleAnimation}\r\n                transition={titleTransition}>\r\n                    Perfect Garage\r\n            </motion.div>\r\n        </h1>\r\n        <h4 className={titleStyles.subTitle}>Votre garage idéal en trois voitures de sport</h4>\r\n    </div>;\r\n};","import React from 'react';\r\nimport Uri from 'jsuri';\r\nimport specStyles from  './spec.module.scss';\r\nimport { extractHostname } from '../../functions/url'; \r\n\r\nconst POWER_MAX = 1200; // max 1200hp, else overflow\r\nconst WEIGHT_MAX = 2500; // max 2500kg, else overflow\r\nconst RATIO_MAX = 20; // max 1kg/hp else overflow\r\n\r\nexport default function Spec({power, weight, officialWeight, imageUrl}) {\r\n\r\n  const theWeight = weight || officialWeight;\r\n\r\n  const ratio = Math.round((theWeight * 10) / power) / 10;\r\n\r\n  const barPowerStyle = {\r\n    width: `${power * 100 / POWER_MAX}%`\r\n  };\r\n\r\n  const barWeightStyle = {\r\n    width: `${theWeight * 100 / WEIGHT_MAX}%`\r\n  };\r\n\r\n  const barRatioStyle = {\r\n    width: `${ratio * 100 / RATIO_MAX}%`\r\n  };\r\n\r\n  const imageUri = new Uri(imageUrl);\r\n  const imageOrigin = extractHostname(imageUri.uriParts.host);\r\n\r\n  return (\r\n    <article className={ specStyles.card }>\r\n      <section className={ specStyles.bars }>\r\n        <div className={ specStyles.barTitle }><legend>Puissance</legend><span><span className={ specStyles.power }>{ power }</span>hp</span></div>\r\n        <div className={ [specStyles.bar, specStyles.barPower].join(' ') } style={barPowerStyle}></div>\r\n        <div className={ specStyles.barTitle }><legend>Poids { weight ? 'constaté' : 'officiel' }</legend><span><span className={ specStyles.weight }>{ theWeight }</span>kg</span></div>\r\n        <div className={ [specStyles.bar, specStyles.barWeight].join(' ') } style={barWeightStyle}></div>\r\n        <div className={ specStyles.barTitle }><legend>Rapport</legend><span><span className={ specStyles.ratio }>{ ratio }</span>kg/hp</span></div>\r\n        <div className={ [specStyles.bar, specStyles.barRatio].join(' ') } style={barRatioStyle}></div>\r\n        <legend>\r\n          Source :&nbsp;<a href=\"http://weightcars-fr.com\">weightcars-fr.com</a>\r\n        </legend>\r\n        { imageOrigin && \r\n          <legend>\r\n           Photo :&nbsp;<a href={`http://${imageOrigin}`}>{imageOrigin}</a>\r\n          </legend>\r\n        }\r\n      </section>\r\n    </article>\r\n  );\r\n}\r\n\r\n\r\n","export const extractHostname = (fullHost) => {\r\n    let imageOrigin = null;\r\n    if (fullHost) {\r\n        const indexOfLastDot = fullHost.lastIndexOf('.');\r\n        if (indexOfLastDot >= 0) {\r\n            const tld = fullHost.substr(indexOfLastDot);\r\n            const domainName = fullHost.substr(0, indexOfLastDot);\r\n            const indexOfSecondDot = domainName.lastIndexOf('.');\r\n            let hostname = null;\r\n            if (indexOfSecondDot >= 0) {\r\n                hostname = domainName.substr(indexOfSecondDot + 1);\r\n            } else {\r\n                hostname = domainName;\r\n            }\r\n            imageOrigin = `${hostname}${tld}`;\r\n        }\r\n    }\r\n    return imageOrigin;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { motion } from 'framer-motion';\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport carStyles from './car.module.scss';\r\nimport Spec from './spec';\r\nimport { fullname } from '../../functions/cars';\r\n\r\nexport const Car = ({ car }) => {\r\n\r\n    const carFullname = fullname(car);\r\n\r\n    const [currentPageIndex, setCurrentPageIndex] = useState(0);\r\n\r\n    const imageUrl = `/images/${car.mongodb_id}-resized.jpg`;\r\n\r\n    const clickLeft = () => {\r\n        setCurrentPageIndex(currentPageIndex - 1);\r\n    }\r\n\r\n    const clickRight = () => {\r\n        setCurrentPageIndex(currentPageIndex + 1);\r\n    }\r\n\r\n    let divContent = null;\r\n    if (currentPageIndex === 0) {\r\n        divContent = <motion.img src={imageUrl} className={carStyles.image} alt={carFullname}\r\n            initial={{opacity: 0}} animate={{ opacity: 1 }} />\r\n    } else {\r\n        divContent = \r\n            <Spec brand={car.model.brand.name} \r\n                variant={car.variant} \r\n                power={car.power} \r\n                weight={car.weight}\r\n                officialWeight={car.officialWeight} \r\n                startYear={car.startYear} \r\n                imageUrl={car.selectedFavcarsUrl} />;\r\n    }\r\n\r\n    return (\r\n            <article className={carStyles.card}>\r\n\r\n                <div href={car.imageUrl} className={carStyles.imageContainer}>\r\n                        { divContent }\r\n                </div>\r\n\r\n                <div className={carStyles.carCaption }>\r\n                    <div className={carStyles.switchButtons}>\r\n                        {\r\n                            currentPageIndex === 1 && \r\n                            <button className={['icon-button', 'icon', carStyles.iconButton].join(' ')}>\r\n                                <FontAwesomeIcon icon=\"image\" size=\"2x\" onClick={ clickLeft } />\r\n                            </button> \r\n                        }\r\n                        {\r\n                            currentPageIndex === 0 && \r\n                            <button className={['icon-button', 'icon', carStyles.iconButton].join(' ')}>\r\n                                <FontAwesomeIcon icon=\"th-list\" size=\"2x\" onClick={ clickRight } />\r\n                            </button>\r\n                        }\r\n                    </div>\r\n                    <div className={carStyles.carTitle}>\r\n                        <h3 className={carStyles.carLongLabel} title={carFullname}>{carFullname}</h3>\r\n                    </div>\r\n                    <div className={carStyles.carYear}>{car.startYear}</div>\r\n                </div>\r\n\r\n            </article>\r\n    );\r\n};\r\n","import Uri from 'jsuri';\r\nimport React from 'react';\r\nimport { graphql } from 'gatsby'\r\nimport './bulma-theme.scss';\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { carLabels, schema } from \"../constants\";\r\nimport { eachCar, eachCarIndex, fullname } from '../functions/cars';\r\nimport indexStyles from './index.module.scss';\r\nimport { Title } from \"../components/title/title\";\r\nimport { Layout } from \"../components/layout\";\r\nimport { SEO } from \"../components/seo/seo\";\r\nimport { Car } from '../components/car/car';\r\n\r\nconst carComponentId = index => `car-${index}`;\r\nconst editButtonId = index => `edit-${index}`;\r\n\r\nexport default class Garage extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        const uri = new Uri(props.location.href);\r\n\r\n        // if edit=X parameter, save car to carX parameter\r\n        const editParam = uri.getQueryParamValue('edit');\r\n        const carParam = uri.getQueryParamValue('car');\r\n        if (editParam && carParam) {\r\n            uri.replaceQueryParam(`car${editParam}`, carParam);\r\n            this.setState({saveOk: false});\r\n        }\r\n        uri.deleteQueryParam('edit');\r\n        uri.deleteQueryParam('car');\r\n\r\n        // add missing params + save state\r\n        const newState = {...this.state};\r\n        const windowGlobal = typeof window !== 'undefined' && window;\r\n        if (windowGlobal) {\r\n            eachCar(param => {\r\n                // Priority to URL if user copy paste shared garage\r\n                const carId = uri.getQueryParamValue(param) || localStorage.getItem(param);\r\n                \r\n                if (carId) {\r\n                    const foundNode = props.data[schema + 'Cars'].edges\r\n                        .find(({ node: car }) => car.mongodb_id === carId);\r\n                    \r\n                    if (foundNode) {\r\n                        if (!uri.getQueryParamValue(param)) {\r\n                            // If carId comes from localstorage and was not on URL, add it\r\n                            uri.addQueryParam(param, foundNode.node);\r\n                        }\r\n                        newState[param] = foundNode.node;\r\n                    } else {\r\n                        if (!uri.getQueryParamValue(param)) {\r\n                            // If carId comes from localstorage and was not found, remove it\r\n                            localStorage.removeItem(param);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        newState.uri = uri.toString();\r\n\r\n        // Save button enabled?\r\n        if (windowGlobal) {\r\n            newState.saveOk = eachCar(param => newState[param] === localStorage.getItem(param)).every(val => !!val);\r\n        }\r\n\r\n        this.state = newState;\r\n\r\n        if (windowGlobal) {\r\n            setTimeout(() => {\r\n                eachCarIndex(editButtonIdx => document.querySelector(`#${editButtonId(editButtonIdx + 1)}`).style.opacity = '1')\r\n            }, 500);\r\n        }\r\n    }\r\n\r\n    render() {\r\n\r\n        const editCar = index => {\r\n            const uri = new Uri(this.state.uri);\r\n            uri.setPath('/browse');\r\n            uri.addQueryParam('edit', index);\r\n            window.location.href = uri.toString();\r\n        };\r\n\r\n        const transform = (car, index) => {\r\n\r\n            const classCar = [indexStyles.car];\r\n            if (index === 2) {\r\n                classCar.push(indexStyles.car2);\r\n            }\r\n            if (car) {\r\n                classCar.push(indexStyles.withCar);\r\n            } else {\r\n                classCar.push(indexStyles.noCar);\r\n            }\r\n            const title = carLabels[index-1];\r\n            const thumbnail = car ? (\r\n                <Car id={carComponentId(index)} title={title} className={indexStyles.carComponent} car={car}\r\n                    initial={{opacity: 0}} animate={{ opacity: 1 }}>\r\n                </Car>\r\n            ) : (\r\n                <div className={indexStyles.noCarThumbnail}>?</div>\r\n            );\r\n            return (\r\n                <div className={classCar.join(' ')}>\r\n                    <div id={editButtonId(index)} className={indexStyles.iconButtonContainer}>\r\n                        <button className={indexStyles.iconButton + \" icon-button\"} onClick={() => editCar(index)}>\r\n                            <FontAwesomeIcon icon=\"edit\" />\r\n                        </button>\r\n                    </div>                    \r\n                    {thumbnail}\r\n                    <div className={[indexStyles.carLabelContainer, 'container', 'is-full'].join(' ')}>\r\n                        <span className={[indexStyles.carLabel, 'badge'].join(' ')}>{ title }</span>\r\n                    </div>                    \r\n                </div>\r\n            );\r\n\r\n        };\r\n\r\n        const car1 = transform(this.state.car1, 1);\r\n        const car2 = transform(this.state.car2, 2);\r\n        const car3 = transform(this.state.car3, 3);\r\n\r\n        const save = () => {\r\n            for (let saveIndex = 1; saveIndex <= 3; saveIndex++) {\r\n                const saveParam = `car${saveIndex}`;\r\n                localStorage.setItem(saveParam, this.state[saveParam]);\r\n                this.setState({saveOk: true, showSaveMessage: true});\r\n                setTimeout(() => this.setState({showSaveMessage: false}), 1000)\r\n            }\r\n        }\r\n\r\n        \r\n        const title = eachCar(car => this.state[car] ? fullname(this.state[car]) : null).filter(s => !!s).join(\"\\n\");\r\n        return (\r\n            <Layout location={this.state.uri} save={save} title={title} uri={this.state.uri} saveDisabled={this.state.saveOk} showSaveMessage={this.state.showSaveMessage}>\r\n                <SEO location={this.props.location.pathname} title={title} uri={this.state.uri} description=\"Créez et partagez votre garage idéal en 3 voitures de sport\" />\r\n                <Title />\r\n                <article className={indexStyles.carsContainer}>\r\n                    {car1} {car2} {car3}\r\n                </article>\r\n            </Layout>\r\n        );\r\n    }\r\n}\r\n\r\nexport const query = graphql`query {\r\n    allMongodbBmbu7Ynqra11RqiCars {\r\n    edges {\r\n      node {\r\n          mongodb_id,\r\n          variant,\r\n          power,\r\n          officialWeight, \r\n          weight,\r\n          options,\r\n          startYear,\r\n          endYear,\r\n          favcarsVariants { name, urls },\r\n          selectedFavcarsUrl,\r\n          model {\r\n              brand {\r\n                  name\r\n              }\r\n            name\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }`;\r\n\r\n"],"sourceRoot":""}