"use strict";(self.webpackChunkperfect_garage=self.webpackChunkperfect_garage||[]).push([[678],{4810:function(e,t,a){a.r(t),a.d(t,{default:function(){return W}});var n=a(5785),r=a(7767),l=a.n(r),i=a(7294),c=a(1545),o=a(7279),s=a(3941),m=a(5095),u=function(e,t){return t.formatMessage({id:"label_"+e})},d=a(7606),g="card-module--iconButton--6jHbY",p="card-module--carLabelContainer--JqU4J",f=function(e){var t=e.empty,a=e.marginCard,n=e.index,r=e.edit,l=e.render,c=e.editButtonId,o=e.label,s=e.onLabelChanged,m=["card-module--card--AW7L7"];a&&m.push("card-module--marginCard--jim8H"),t?m.push("card-module--cardWithoutCar--pz3k-"):m.push("card-module--cardWithCar--QTCrW");var u=(0,i.useState)(o),f=u[0],E=u[1],h=(0,i.useState)(!1),v=h[0],b=h[1],w=["card-module--carLabel--6niFa","badge"];return s&&w.push("card-module--carLabelEdit--YmSNp"),i.createElement("div",{className:m.join(" ")},i.createElement("div",{id:c,className:"card-module--iconButtonContainer--xwwBp"},i.createElement("button",{type:"button",className:g+" icon-button",onClick:function(){return r(n)}},i.createElement(d.G,{icon:"edit"}))),l(),i.createElement("div",{className:[p,"container","is-fluid"].join(" ")},i.createElement("div",{className:w.join(" ")},v&&i.createElement("p",{className:"control has-text-dark",style:{display:"flex"}},i.createElement("input",{id:"search-input",type:"text",onChange:function(e){var t=e.target.value;return E(t)},className:"input",style:{flex:1},value:f}),i.createElement("button",{type:"button",className:g+" icon-button",onClick:function(){E(o),b(!1)}},i.createElement(d.G,{icon:"times"})),i.createElement("button",{type:"button",className:g+" icon-button",onClick:function(){b(!1),s(f)}},i.createElement(d.G,{icon:"check"}))),!v&&i.createElement(i.Fragment,null,i.createElement("div",{style:{flex:1}},o),s&&i.createElement("button",{type:"button",className:g+" icon-button",onClick:function(){b(!0)}},i.createElement(d.G,{icon:"edit"}))))))};f.defaultProps={marginCard:!1,empty:!1,onLabelChanged:null};var E=a(6898),h="title-module--titleContainer---5d8a",v="title-module--title--r60k3",b=function(){var e=(0,c.useIntl)();return i.createElement("div",{className:[h,"badge"].join(" ")},i.createElement("h1",{className:[v].join(" ")},i.createElement(E.ww.div,{className:"title-module--chromeText--7MXR9",animate:{backgroundImage:["linear-gradient(to right, #EEE, #666, #444)","linear-gradient(to right, #666, #EEE, #666)","linear-gradient(to right, #666, #666, #EEE)","linear-gradient(to right, #CCC, #EEE, #CCC)"]},transition:{duration:1,ease:"easeInOut"}},e.formatMessage({id:"components.title.title"}))),i.createElement("h4",{className:"title-module--subTitle--zEB3E"},e.formatMessage({id:"components.title.subtitle"})))},w=a(7106),C=a(8769),N="spec-module--bar--uDrBt",y="spec-module--barWeight---tOOB",k="spec-module--barPower--W-y-W",M="spec-module--barRatio--Gdo76",x="spec-module--barTitle--upkwU",S=function(e){var t=e.power,a=e.weight,n=e.officialWeight,r=e.imageUrl,o=(0,c.useIntl)(),s=a||n,u=a?o.formatMessage({id:"components.spec.observed_weight"}):o.formatMessage({id:"components.spec.official_weight"}),d=Math.round(10*s/t)/10,g={width:100*t/1200+"%"},p={width:100*s/2500+"%"},f={width:100*d/20+"%"},E=new(l())(r),h=(0,m.Z_)(E.uriParts.host),v=o.formatMessage({id:"components.spec.hp"});return i.createElement("section",{className:"spec-module--specContainer--awvy8"},i.createElement("div",{className:x},i.createElement("legend",null,o.formatMessage({id:"components.spec.power"})),i.createElement("span",null,i.createElement("span",null,t),v)),i.createElement("div",{className:[N,k].join(" "),style:g}),i.createElement("div",{className:x},i.createElement("legend",null,u),i.createElement("span",null,i.createElement("span",null,s),"kg")),i.createElement("div",{className:[N,y].join(" "),style:p}),i.createElement("div",{className:x},i.createElement("legend",null,o.formatMessage({id:"components.spec.ratio"})),i.createElement("span",null,i.createElement("span",null,d),"kg/"+v)),i.createElement("div",{className:[N,M].join(" "),style:f}),i.createElement("legend",null,"Source : ",i.createElement("a",{href:"http://weightcars-fr.com"},"weightcars-fr.com")),h&&i.createElement("legend",null,"Photo : ",i.createElement("a",{href:"http://"+h},h)))};S.defaultProps={weight:null,imageUrl:null};var j=S,B="car-module--iconButton--CvMbI",T=function(e){var t=e.car,a=(0,o.$0)(t),n=(0,i.useState)(0),r=n[0],l=n[1],c="/images/"+t.mongodb_id+"-resized.jpg",s=null;return s=0===r?i.createElement(E.ww.img,{src:c,className:"car-module--image--4+-yy",alt:a,initial:{opacity:0},animate:{opacity:1}}):i.createElement(j,{brand:t.model.brand.name,variant:t.variant,power:t.power,weight:t.weight,officialWeight:t.officialWeight,startYear:t.startYear,imageUrl:t.selectedFavcarsUrl}),i.createElement("article",{className:"car-module--card--TBmaA"},i.createElement("div",{href:t.imageUrl,className:"car-module--imageContainer--2kl+h"},s),i.createElement("div",{className:"car-module--carCaption--ZUVKV"},i.createElement("div",{className:"car-module--switchButtons--1qPIa"},1===r&&i.createElement("button",{type:"button",className:["icon-button","icon",B].join(" ")},i.createElement(d.G,{icon:"image",size:"2x",onClick:function(){l(r-1)}})),0===r&&i.createElement("button",{type:"button",className:["icon-button","icon",B].join(" ")},i.createElement(d.G,{icon:"exchange-alt",size:"2x",onClick:function(){l(r+1)}}))),i.createElement("div",{className:"car-module--carTitle--To4bV"},i.createElement("h3",{className:"car-module--carLongLabel--D4JlF",title:a},a)),i.createElement("div",{className:"car-module--carYear--TqbvK"},t.startYear)))},I=function(e){return"car-"+e},L=function(e){return"edit-"+e},W=(0,c.injectIntl)((function(e){var t=e.location,a=e.intl,r=e.data,d=(0,i.useState)([]),g=d[0],p=d[1],E=new(l())((0,m.XX)(new(l())(t.href))),h=(0,i.useState)(E),v=h[0],N=h[1],y=(0,m.Nu)(v),k=(0,i.useState)({saveMessage:null,saveOk:!y}),M=k[0],x=k[1],S=(0,i.useMemo)((function(){return[g,p]}),[g,p]),j=M.saveOk,B=M.saveMessage;(0,i.useEffect)((function(){var e="undefined"!=typeof window&&window,t=(0,n.Z)(g);e&&((0,m.Qq)(v).forEach((function(e,n){if(t[n]=null,e){var l=e.carId,i=e.carLabel;if(l){var c=r.allMongodbBmbu7Ynqra11RqiCars.edges.find((function(e){return e.node.mongodb_id===l}));c&&(t[n]=c.node,t[n].label=i||u(n+1,a))}}})),p(t));x({saveOk:!e||!(0,s.m0)(t)}),e&&(history.pushState({foo:"bar"},"",v.path()),setTimeout((function(){(0,o.hS)((function(e){var t=document.querySelector("#"+L(e+1));t&&(t.style.opacity="1")}))}),200))}),[]);var W=function(e){var t=new(l())(v.toString());t.setPath("/browse"),t.addQueryParam("edit",e),(0,c.navigate)((0,m.XX)(t))},_=function(e,t){var r=e?i.createElement(T,{id:I(t),className:"index-module--carComponent--2sxy5",car:e,initial:{opacity:0},animate:{opacity:1}}):i.createElement("div",{className:"index-module--noCarThumbnail--ma6Fw"},"?");return i.createElement(f,{key:"card-"+(e?e.mongodb_id:t),marginCard:2===t,empty:!e,index:t,label:e?e.label:u(t,a),edit:W,render:function(){return r},editButtonId:L(t),onLabelChanged:e?function(e){return function(e,t){var a=(0,n.Z)(g);a[e].label=t;var r=(0,m.Yh)(a,v);p(a),x({saveOk:!(0,s.m0)(g)}),N(r),history.pushState({foo:"bar"},"",r.path())}(t-1,e)}:null})},P=g.map((function(e,t){return _(e,t+1)})),Y=g.map((function(e){return e?(0,o.$0)(e):null})).filter((function(e){return!!e})).join("\n");return i.createElement(o.ud.Provider,{value:S},i.createElement(w.A,{location:v.toString(),save:function(){if(!j){var e=(0,s.a1)(g),t=(0,m.Yh)(g,v),n=a.formatMessage({id:"pages.index.garage_saved"});x({saveOk:!0,saveMessage:n+' "'+e+'"'}),N(t),setTimeout((function(){return x({saveMessage:null})}),2e3)}},title:Y,uri:v.toString(),saveDisabled:j,saveMessage:B,showButtons:!0},i.createElement(C.H,{location:t.pathname,title:Y,uri:v.toString(),description:a.formatMessage({id:"pages.index.meta.description"})}),i.createElement(b,null),i.createElement("article",{className:"index-module--carsContainer--1c+rf"},P)))}))}}]);
//# sourceMappingURL=component---src-pages-index-js-b88cecffe1f2cef7f84c.js.map