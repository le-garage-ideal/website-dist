{"version":3,"sources":["webpack:///./src/templates/car.js","webpack:///./src/components/car/spec.js","webpack:///./src/functions/url.js","webpack:///./src/components/car/car.js"],"names":["pageContext","location","car","carFullname","model","brand","name","variant","pathname","title","description","Spec","power","weight","officialWeight","imageUrl","theWeight","ratio","Math","round","barPowerStyle","width","barWeightStyle","barRatioStyle","imageOrigin","fullHost","indexOfLastDot","lastIndexOf","tld","substr","domainName","indexOfSecondDot","extractHostname","Uri","uriParts","host","className","specStyles","card","bars","barTitle","bar","barPower","join","style","barWeight","barRatio","href","Car","useState","currentPageIndex","setCurrentPageIndex","mongodb_id","divContent","img","src","carStyles","image","alt","initial","opacity","animate","startYear","selectedFavcarsUrl","imageContainer","carCaption","switchButtons","iconButton","icon","size","onClick","carTitle","carLongLabel","carYear"],"mappings":"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","file":"component---src-templates-car-js-af0c86553cf8e62b930b.js","sourcesContent":["import React from \"react\";\r\nimport { EmptyLayout } from '../components/layout';\r\nimport SEO from \"../components/seo/seo\";\r\nimport { Car } from '../components/car/car';\r\n\r\nexport default ({ pageContext, location }) => {\r\n\r\n    const car = pageContext.car;\r\n\r\n    const carFullname = `${car.model.brand.name} ${car.variant}`;\r\n\r\n    return (\r\n        <EmptyLayout>\r\n            <SEO location={location.pathname} title={carFullname} description={`Photo et détail de la voiture : ${carFullname}`} />\r\n            <Car car={car} />\r\n        </EmptyLayout>\r\n    );\r\n};\r\n","import React from 'react';\r\nimport Uri from 'jsuri';\r\nimport specStyles from  './spec.module.scss';\r\nimport { extractHostname } from '../../functions/url'; \r\n\r\nconst POWER_MAX = 1200; // max 1200hp, else overflow\r\nconst WEIGHT_MAX = 2500; // max 2500kg, else overflow\r\nconst RATIO_MAX = 20; // max 1kg/hp else overflow\r\n\r\nexport default function Spec({power, weight, officialWeight, imageUrl}) {\r\n\r\n  const theWeight = weight ? weight : officialWeight;\r\n\r\n  const ratio = Math.round((theWeight * 10) / power) / 10;\r\n\r\n  const barPowerStyle = {\r\n    width: `${power * 100 / POWER_MAX}%`\r\n  };\r\n\r\n  const barWeightStyle = {\r\n    width: `${theWeight * 100 / WEIGHT_MAX}%`\r\n  };\r\n\r\n  const barRatioStyle = {\r\n    width: `${ratio * 100 / RATIO_MAX}%`\r\n  };\r\n\r\n  const imageUri = new Uri(imageUrl);\r\n  const imageOrigin = extractHostname(imageUri.uriParts.host);\r\n\r\n  return (\r\n    <article className={ specStyles.card }>\r\n      <section className={ specStyles.bars }>\r\n        <div className={ specStyles.barTitle }><legend>Puissance</legend><span><span className={ specStyles.power }>{ power }</span>hp</span></div>\r\n        <div className={ [specStyles.bar, specStyles.barPower].join(' ') } style={barPowerStyle}></div>\r\n        <div className={ specStyles.barTitle }><legend>Poids { weight ? 'constaté' : 'officiel' }</legend><span><span className={ specStyles.weight }>{ theWeight }</span>kg</span></div>\r\n        <div className={ [specStyles.bar, specStyles.barWeight].join(' ') } style={barWeightStyle}></div>\r\n        <div className={ specStyles.barTitle }><legend>Rapport</legend><span><span className={ specStyles.ratio }>{ ratio }</span>kg/hp</span></div>\r\n        <div className={ [specStyles.bar, specStyles.barRatio].join(' ') } style={barRatioStyle}></div>\r\n        <legend>\r\n          Source :&nbsp;<a href=\"http://weightcars-fr.com\">weightcars-fr.com</a>\r\n        </legend>\r\n        { imageOrigin && \r\n          <legend>\r\n           Photo :&nbsp;<a href={`http://${imageOrigin}`}>{imageOrigin}</a>\r\n          </legend>\r\n        }\r\n      </section>\r\n    </article>\r\n  );\r\n}\r\n\r\n\r\n","export const extractHostname = (fullHost) => {\r\n    let imageOrigin = null;\r\n    if (fullHost) {\r\n        const indexOfLastDot = fullHost.lastIndexOf('.');\r\n        if (indexOfLastDot >= 0) {\r\n            const tld = fullHost.substr(indexOfLastDot);\r\n            const domainName = fullHost.substr(0, indexOfLastDot);\r\n            const indexOfSecondDot = domainName.lastIndexOf('.');\r\n            let hostname = null;\r\n            if (indexOfSecondDot >= 0) {\r\n                hostname = domainName.substr(indexOfSecondDot + 1);\r\n            } else {\r\n                hostname = domainName;\r\n            }\r\n            imageOrigin = `${hostname}${tld}`;\r\n        }\r\n    }\r\n    return imageOrigin;\r\n}\r\n","import React, { useState } from \"react\";\r\nimport { motion } from 'framer-motion';\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport carStyles from './car.module.scss';\r\nimport Spec from './spec';\r\n\r\nexport const Car = ({ car }) => {\r\n\r\n    const carFullname = `${car.model.brand.name} ${car.variant}`;\r\n\r\n    const [currentPageIndex, setCurrentPageIndex] = useState(0);\r\n\r\n    const imageUrl = `/images/${car.mongodb_id}-resized.jpg`;\r\n\r\n    const clickLeft = () => {\r\n        setCurrentPageIndex(currentPageIndex - 1);\r\n    }\r\n\r\n    const clickRight = () => {\r\n        setCurrentPageIndex(currentPageIndex + 1);\r\n    }\r\n\r\n    let divContent = null;\r\n    if (currentPageIndex === 0) {\r\n        divContent = <motion.img src={imageUrl} className={carStyles.image} alt={carFullname}\r\n            initial={{opacity: 0}} animate={{ opacity: 1 }} />\r\n    } else {\r\n        divContent = \r\n            <Spec brand={car.model.brand.name} \r\n                variant={car.variant} \r\n                power={car.power} \r\n                weight={car.weight}\r\n                officialWeight={car.officialWeight} \r\n                startYear={car.startYear} \r\n                imageUrl={car.selectedFavcarsUrl} />;\r\n    }\r\n\r\n    return (\r\n            <article className={carStyles.card}>\r\n\r\n                <div href={car.imageUrl} className={carStyles.imageContainer}>\r\n                        { divContent }\r\n                </div>\r\n\r\n                <div className={carStyles.carCaption }>\r\n                    <div className={carStyles.switchButtons}>\r\n                        {\r\n                            currentPageIndex === 1 && \r\n                            <button className={['icon-button', 'icon', carStyles.iconButton].join(' ')}>\r\n                                <FontAwesomeIcon icon=\"image\" size=\"2x\" onClick={ clickLeft } />\r\n                            </button> \r\n                        }\r\n                        {\r\n                            currentPageIndex === 0 && \r\n                            <button className={['icon-button', 'icon', carStyles.iconButton].join(' ')}>\r\n                                <FontAwesomeIcon icon=\"th-list\" size=\"2x\" onClick={ clickRight } />\r\n                            </button>\r\n                        }\r\n                    </div>\r\n                    <div className={carStyles.carTitle}>\r\n                        <h3 className={carStyles.carLongLabel} title={carFullname}>{carFullname}</h3>\r\n                    </div>\r\n                    <div className={carStyles.carYear}>{car.startYear}</div>\r\n                </div>\r\n\r\n            </article>\r\n    );\r\n};\r\n"],"sourceRoot":""}